{"version":3,"sources":["webpack:///webpack/bootstrap 1e6a5d7acdc5fc2bba67","webpack:///./server/config.js","webpack:///./server/utils/index.js","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"express\"","webpack:///./server/db/connection.js","webpack:///./server/db/crud.js","webpack:///./server/utils/sitemaps/create-sitemap.js","webpack:///external \"request\"","webpack:///external \"node-cron\"","webpack:///./server/index.js","webpack:///external \"nuxt\"","webpack:///external \"compression\"","webpack:///external \"helmet\"","webpack:///./server/api/index.js","webpack:///external \"mongodb\"","webpack:///./server/db/common-db-params.js","webpack:///./server/utils/sitemaps/utils.js","webpack:///external \"sitemap\"","webpack:///external \"zlib\"","webpack:///./server/utils/feed/index.js","webpack:///./server/utils/feed/feed.js","webpack:///external \"xml\"","webpack:///external \"striptags\"","webpack:///./server/utils/pn/index.js","webpack:///./server/api/home.js","webpack:///./server/api/categories.js","webpack:///./server/api/promotions.js","webpack:///./server/api/stores.js","webpack:///./server/api/upload.js","webpack:///./server/api/seo.js","webpack:///./server/api/elBuenFin.js","webpack:///./server/api/handlers/categories.js","webpack:///./server/api/handlers/promotions.js","webpack:///./server/api/handlers/stores.js","webpack:///./server/api/handlers/upload.js","webpack:///external \"mkdirp\"","webpack:///external \"multer\"","webpack:///external \"jimp\"","webpack:///./server/api/handlers/seo.js","webpack:///./server/api/handlers/elBuenFin.js","webpack:///external \"body-parser\"","webpack:///external \"morgan\"","webpack:///external \"rotating-file-stream\"","webpack:///./server/utils/sitemaps/schedule.js","webpack:///external \"express-session\"","webpack:///external \"passport\"","webpack:///external \"cookie-parser\"","webpack:///external \"connect-flash\"","webpack:///./server/utils/passport/index.js","webpack:///external \"passport-local\"","webpack:///external \"bcrypt\"","webpack:///./server/routes.js","webpack:///./nuxt.config.js"],"names":["path","require","config","db","user","password","name","host","shard1","shard2","shard3","queryString","mainCollection","itemsPerPage","collections","main","secundary","categories","pages","seo","elBuenFin","collation","locale","routes","categoriesList","stores","storeList","paths","root","resolve","__dirname","server","static","xml","feed","txt","title","description","app_status","module","exports","crud","conn","getCrud","then","formatDateStr","date","format","dateStr","Date","toUpperCase","toGMTString","split","toISOString","getDate","dateObj","substract","getTime","checkIfNewOffers","getItem","collection","query","sort","published","projection","doc","lastOfferDate","lastOfferDateTime","hours","minus12hrsDateTime","minus12hrsDate","resp","lastOffer","news","MongoClient","url","connect","console","log","catch","err","spec","shared","that","DATABASE","COLLECTION","ITEMS_PER_PAGE","items_per_page","getItems","params","cursor","find","skip","limit","toArray","docs","setItem","insertOne","document","res","updateOne","update","options","searchItems","score","$meta","getPagination","count","numItems","numPages","Math","ceil","total","aggregate","pipeline","data","utils","smUtils","fs","request","rootXml","offers","pagesName","storesName","elBuenFinName","categoriesName","getData","slug","modified","img","img_title","img_alt","smPages","compoundSitemap","createSitemap","add","changefreq","priority","lastmodISO","addToSitemap","route","algo","createSitemapFile","sitemap_path","sitemapName","smCategories","smStores","smElBuenFin","smOffers","offersSitemap","smIndex","iterable","Promise","reject","stat","all","results","content","mtime","writeFile","Error","compress","ping","error","response","body","index","develop","app","express","process","env","HOST","port","PORT","morganFormat","logDirectory","join","existsSync","mkdirSync","accessLogStream","rfs","interval","set","use","morgan","stream","bodyParser","json","urlencoded","extended","cookieParser","session","secret","passport","initialize","flash","helmet","disable","configPassport","nuxtConfig","dev","nuxt","compression","builder","build","exit","render","listen","router","Router","commonDbParams","csm","pn","home","promotions","upload","handler","groupAlphabeticallyInSwitch","branches","case","$eq","$substrCP","default","sm","zlib","readable","createReadStream","writable","createWriteStream","gzip","createGzip","pipe","sitemap","hostname","xmlNs","forEach","current","obj","caption","toString","on","end","Feed","striptags","cron","rootFeed","create","feedXml","link","image","favicon","copyright","updated","generator","feedLinks","atom","slice","length","addItem","category","rss2","atom1","schedule","GENERATOR","DOCTYPE","items","contributors","item","push","contributor","warn","_attr","xmlns","id","author","email","uri","rel","href","atomLink","hub","subtitle","logo","icon","rights","term","entry","type","_cdata","summary","Array","isArray","oneAuthor","isAtom","isContent","channel","lastBuildDate","rss","version","guid","pubDate","some","enclosure","home_page_url","feed_url","map","feedItem","html_content","date_modified","date_published","JSON","stringify","d","pad","n","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","apiKey","headers","method","form","status","request_id","statusCode","statusMessage","crudInst","conf","get","req","page","Number","thumbnail","meta_description","img_data","pagination","getById","getIndex","getFormData","save","getBySlug","existsBySlug","getStores","_id","h1","h2","meta_title","info","$limit","$sort","$project","$group","$switch","$push","alternate","post","rightNow","saveMethod","saveParams","Object","assign","hasOwnProperty","$set","upsert","dbResponse","result","ok","$sample","size","$in","$ne","relatedItems","offer","success","allStores","allCategories","updateStoresAndCategories","currCat","currStore","updateSitemaps","sendPushNotification","message","missingData","multi","url_site","mkdirp","multer","jimp","getPath","file","finalPath","getFullYear","getMonth","mkdirPromise","pathFile","storage","diskStorage","destination","callback","filename","originalname","multerUpload","array","files","originalName","extension","filePath","finalRootPath","read","scaleToFit","quality","write","msg","dbRes","elBuenFinCategory","admin","pwd","bcrypt","hashSync","genSaltSync","userName","serializeUser","done","deserializeUser","usernameField","passwordField","passReqToCallback","compareSync","loginPath","adminPath","logoutPath","authenticate","successRedirect","failureRedirect","failureFlash","isLoggedIn","logout","redirect","next","isAuthenticated","test","loading","color","height","cache","head","htmlAttrs","lang","meta","charset","sizes","__dangerouslyDisableSanitizers","css","vendor","extend","ctx","isClient","rules","enforce","loader","exclude"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1e6a5d7acdc5fc2bba67","var path = require('path')\r\n\r\nvar config = {\r\n  db: {\r\n    user: 'ofertadeo_publisher',\r\n    password: 'Cdop_2017*',\r\n    name: 'ofertadeo',\r\n    host: 'localhost:27017',\r\n    shard1: 'pensemosweb-shard-00-00-147ev.mongodb.net:27017',\r\n    shard2: 'pensemosweb-shard-00-01-147ev.mongodb.net:27017',\r\n    shard3: 'pensemosweb-shard-00-02-147ev.mongodb.net:27017',\r\n    queryString: '?ssl=true&replicaSet=pensemosweb-shard-0&authSource=admin',\r\n    mainCollection: 'offers',\r\n    itemsPerPage: 18,\r\n    collections: {\r\n      main: 'offers',\r\n      secundary: 'stores',\r\n      categories: 'categories',\r\n      pages: 'pages',\r\n      seo: 'seo',\r\n      elBuenFin: 'elBuenFin'\r\n    },\r\n    collation: {\r\n      locale: 'es'\r\n    }\r\n  },\r\n  routes: {\r\n    categories: '/categorias',\r\n    categoriesList: '/categorias',\r\n    stores: '/promociones',\r\n    main: '/promociones',\r\n    storeList: '/tiendas',\r\n    elBuenFin: '/el-buen-fin'\r\n  },\r\n  host: 'https://www.ofertadeo.com',\r\n  paths: {\r\n    root: path.resolve(__dirname, '../'),\r\n    server: __dirname,\r\n    static: '/home/jaime/static',\r\n    xml: '/home/jaime/xml',\r\n    feed: '/home/jaime/static/feed'\r\n  },\r\n  txt: {\r\n    categories: 'Categorías',\r\n    stores: 'Tiendas',\r\n    feed: {\r\n      title: 'Ofertas y Promociones en México - Ofertadeo',\r\n      description: 'Encuentra las mejores ofertas, promociones y descuentos en México de las principales tiendas de tu ciudad. ✓ ¡Ahorra con ofertadeo!'\r\n    }\r\n  },\r\n  app_status: 'deploy'\r\n}\r\n\r\nmodule.exports = config\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/config.js","var crud = require('../db/crud.js')\nlet config = require('../config.js')\nlet conn = require('../db/connection.js')(config)\n\nfunction getCrud () {\n  return conn.then(function (db) {\n    return crud({ db: db, config: config })\n  })\n}\n\nfunction formatDateStr (date, format) {\n  var dateStr = new Date(date)\n  if (format && format.toUpperCase() === 'GMT') {\n    return dateStr.toGMTString().split('GMT')[0] + '-0500'\n  }\n  return dateStr.toISOString().split('.')[0] + '-05:00'\n}\n\nfunction getDate (dateObj, format) {\n  var date\n  if (dateObj) {\n    date = new Date(dateObj)\n  } else {\n    date = new Date()\n  }\n\n  var substract = date.getTime() - (300 * 60 * 1000)// minus 5 hrs\n\n  return formatDateStr(substract, format)\n}\n\nfunction checkIfNewOffers () {\n  return getCrud()\n    .then(function (crud) {\n      return crud.getItem({\n        collection: config.db.collections.main,\n        query: {},\n        sort: { published: -1 },\n        projection: { published: 1 }\n      })\n    })\n    .then(function (doc) {\n      let lastOfferDate = new Date(doc.published)\n      let lastOfferDateTime = new Date(doc.published).getTime()\n      let hours = 12 * 60 * 60 * 1000\n      let minus12hrsDateTime = new Date().getTime() - hours\n      let minus12hrsDate = new Date(minus12hrsDateTime)\n      let resp = {\n        lastOffer: doc.published,\n        lastOfferDate: getDate(lastOfferDate),\n        lastOfferDateTime: lastOfferDateTime,\n        minus12hrsDate: getDate(minus12hrsDate),\n        minus12hrsDateTime: minus12hrsDateTime,\n        news: false\n      }\n\n      if (lastOfferDateTime >= minus12hrsDateTime) {\n        resp.news = true\n        return resp\n      }\n\n      return resp\n    })\n}\n\nmodule.exports = {\n  getDate: getDate,\n  checkIfNewOffers: checkIfNewOffers,\n  getCrud: getCrud\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/index.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 4\n// module chunks = 0","'use strict'\r\n\r\nvar MongoClient = require('mongodb').MongoClient\r\n\r\nmodule.exports = function (config) {\r\n  // connPromise is pending when trying to connect to mongodb atlas\r\n  // var shards = config.db.shard1 + ',' + config.db.shard2 + ',' + config.db.shard3;\r\n  // var url = 'mongodb://' + config.db.user + ':' + config.db.password + '@' + shards + '/' + config.db.name + config.db.queryString;\r\n  var url = 'mongodb://' + config.db.user + ':' + config.db.password + '@' + config.db.host + '/' + config.db.name\r\n\r\n  return MongoClient.connect(url).then(function (conn) {\r\n    console.log('It is connected to db: ' + config.db.name + ' in ' + config.db.host)\r\n    return conn\r\n  })\r\n    .catch(function (err) {\r\n      console.log(err)\r\n      return err\r\n    })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/db/connection.js","'use strict'\nmodule.exports = function crud (spec, shared) {\n  let that = {}\n  spec = spec || {}\n  shared = shared || {}\n\n  spec.DATABASE = spec.db || spec.config.db.name\n  spec.COLLECTION = spec.collection || spec.config.db.collections.main\n  spec.ITEMS_PER_PAGE = spec.items_per_page || spec.config.db.itemsPerPage\n\n  let getItems = function (params) {\n    let db = params.db || spec.DATABASE\n    let itemsPerPage = params.items_per_page || spec.ITEMS_PER_PAGE\n    let cursor = db.collection(params.collection || spec.COLLECTION)\n      .find(params.query || {}, params.projection || {})\n\n    if (params.sort) {\n      cursor.sort(params.sort)\n    }\n\n    if (params.skip) {\n      cursor.skip(params.skip)\n    }\n\n    return cursor.limit(itemsPerPage)\n      .toArray()\n      .then(function (docs) {\n        if (itemsPerPage > 1) {\n          return docs\n        } else {\n          return docs[0]\n        }\n      })\n      .catch(function (err) {\n        return err\n      })\n  }\n\n  let getItem = function (params) {\n    params.items_per_page = 1\n    return getItems(params)\n  }\n\n  let setItem = function (params) {\n    let db = params.db || spec.DATABASE\n    return db.collection(params.collection || spec.COLLECTION)\n      .insertOne(params.document)\n      .then(function (res) {\n        return res\n      })\n      .catch(function (err) {\n        return err\n      })\n  }\n\n  let updateOne = function (params) {\n    let db = params.db || spec.DATABASE\n    return db.collection(params.collection || spec.COLLECTION)\n      .updateOne(params.query, params.update)\n      .then(function (res) {\n        return res\n      })\n      .catch(function (err) {\n        return err\n      })\n  }\n\n  let update = function (params) {\n    let db = params.db || spec.DATABASE\n    return db.collection(params.collection || spec.COLLECTION)\n      .update(params.query, params.update, params.options)\n      .then(function (res) {\n        return res\n      })\n      .catch(function (err) {\n        return err\n      })\n  }\n\n  let searchItems = function (params) {\n    let db = params.db || spec.DATABASE\n    return db.collection(params.collection || spec.COLLECTION)\n      // we project the textScore meta data and then we sort the results by the best matches first\n      .find(params.query, params.projection || { score: { $meta: 'textScore' } })\n      .sort(params.sort || { score: { $meta: 'textScore' } })\n      .skip(params.skip || 0)\n      .limit(params.items_per_page || spec.ITEMS_PER_PAGE)\n      .toArray()\n      .then(function (docs) {\n        return docs\n      })\n      .catch(function (err) {\n        return err\n      })\n  }\n\n  let getPagination = function (params) {\n    let db = params.db || spec.DATABASE\n    return db.collection(params.collection || spec.COLLECTION)\n      .count(params.query || {})\n      .then(function (numItems) {\n        let itemsPerPage = params.items_per_page || spec.ITEMS_PER_PAGE\n        let numPages = 0\n        if (numItems > itemsPerPage) {\n          numPages = Math.ceil(numItems / itemsPerPage)\n        }\n        return {\n          pages: numPages,\n          total: numItems\n        }\n      })\n      .catch(function (err) {\n        return err\n      })\n  }\n\n  let aggregate = function (params) {\n    let db = params.db || spec.DATABASE\n    return db.collection(params.collection || spec.COLLECTION)\n      .aggregate(params.pipeline, params.options)\n      .toArray()\n      .then(function (data) {\n        return data\n      })\n      .catch(function (err) {\n        return err\n      })\n  }\n\n  that.getItems = getItems\n  that.getItem = getItem\n  that.setItem = setItem\n  that.updateOne = updateOne\n  that.update = update\n  that.searchItems = searchItems\n  that.getPagination = getPagination\n  that.aggregate = aggregate\n\n  return that\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/db/crud.js","var utils = require('../index.js')\r\nvar smUtils = require('./utils.js')\r\nvar config = require('../../config')\r\nvar fs = require('fs')\r\nvar request = require('request')\r\nvar rootXml = config.paths.xml\r\nvar offers = 'sitemap-offers.xml'\r\nvar pagesName = 'sitemap-pages.xml'\r\nvar storesName = 'sitemap-stores.xml'\r\nvar elBuenFinName = 'sitemap-el-buen-fin.xml'\r\nvar categoriesName = 'sitemap-categories.xml'\r\n\r\nfunction getData (params) {\r\n  return utils.getCrud()\r\n    .then(function (crud) {\r\n      return crud.getItems({\r\n        collection: params.collection || config.db.collections.main,\r\n        query: params.query || {},\r\n        projection: params.projection || { slug: 1, modified: 1, img: 1, img_title: 1, img_alt: 1 },\r\n        items_per_page: params.items_per_page || 10000,\r\n        sort: { published: -1 }\r\n      }).catch(function (err) {\r\n        return err\r\n      })\r\n    })\r\n    .catch(function (err) {\r\n      return err\r\n    })\r\n}\r\n\r\nfunction smPages () {\r\n  var modified = utils.getDate()\r\n  var compoundSitemap = smUtils.createSitemap()\r\n\r\n  compoundSitemap.add({url: '/', changefreq: 'daily', priority: 1.0, lastmodISO: modified})\r\n  compoundSitemap.add({url: '/el-buen-fin', changefreq: 'weekly', priority: 0.9, lastmodISO: modified})\r\n  compoundSitemap.add({url: '/el-buen-fin/tiendas', changefreq: 'weekly', priority: 0.8, lastmodISO: modified})\r\n\r\n  return getData({ collection: config.db.collections.pages })\r\n    .then(function (data) {\r\n      return smUtils.addToSitemap(compoundSitemap, data, {\r\n        route: '',\r\n        changefreq: 'weekly',\r\n        priority: 0.6\r\n      })\r\n    })\r\n    .then(function (algo) {\r\n      return smUtils.createSitemapFile(compoundSitemap, {\r\n        sitemap_path: rootXml + '/' + pagesName,\r\n        sitemapName: pagesName\r\n      })\r\n    })\r\n    .catch(function (err) {\r\n      return err\r\n    })\r\n}\r\n\r\nfunction smCategories () {\r\n  var smCategories = smUtils.createSitemap()\r\n  return getData({ collection: config.db.collections.categories })\r\n    .then(function (data) {\r\n      smUtils.addToSitemap(smCategories, data, {\r\n        route: config.routes.categories,\r\n        changefreq: 'weekly',\r\n        priority: 0.8\r\n      })\r\n    })\r\n    .then(function () {\r\n      return smUtils.createSitemapFile(smCategories, {\r\n        sitemap_path: rootXml + '/' + categoriesName,\r\n        sitemapName: categoriesName\r\n      })\r\n    })\r\n    .catch(function (err) {\r\n      return err\r\n    })\r\n}\r\n\r\nfunction smStores () {\r\n  var smStores = smUtils.createSitemap()\r\n  return getData({ collection: config.db.collections.secundary })\r\n    .then(function (data) {\r\n      return smUtils.addToSitemap(smStores, data, {\r\n        route: config.routes.storeList,\r\n        changefreq: 'weekly',\r\n        priority: 0.8\r\n      })\r\n    })\r\n    .then(function () {\r\n      return smUtils.createSitemapFile(smStores, {\r\n        sitemap_path: rootXml + '/' + storesName,\r\n        sitemapName: storesName\r\n      })\r\n    })\r\n    .catch(function (err) {\r\n      return err\r\n    })\r\n}\r\n\r\nfunction smElBuenFin () {\r\n  var smStores = smUtils.createSitemap()\r\n  return getData({ collection: config.db.collections.elBuenFin })\r\n    .then(function (data) {\r\n      return smUtils.addToSitemap(smStores, data, {\r\n        route: config.routes.elBuenFin,\r\n        changefreq: 'weekly',\r\n        priority: 0.8\r\n      })\r\n    })\r\n    .then(function () {\r\n      return smUtils.createSitemapFile(smStores, {\r\n        sitemap_path: rootXml + '/' + elBuenFinName,\r\n        sitemapName: elBuenFinName\r\n      })\r\n    })\r\n    .catch(function (err) {\r\n      return err\r\n    })\r\n}\r\n\r\nfunction smOffers () {\r\n  var offersSitemap = smUtils.createSitemap()\r\n\r\n  return getData({ collection: config.db.collections.main })\r\n    .then(function (data) {\r\n      smUtils.addToSitemap(offersSitemap, data, {\r\n        route: config.routes.main,\r\n        changefreq: 'monthly',\r\n        priority: 0.6\r\n      })\r\n    })\r\n    .then(function () {\r\n      return smUtils.createSitemapFile(offersSitemap, {\r\n        sitemap_path: rootXml + '/' + offers,\r\n        sitemapName: offers\r\n      })\r\n    })\r\n    .catch(function (err) {\r\n      return err\r\n    })\r\n}\r\n\r\nfunction smIndex () {\r\n  let iterable = [\r\n    new Promise(function (resolve, reject) {\r\n      fs.stat(`${rootXml}/${pagesName}.gz`, function (err, stat) {\r\n        if (err) {\r\n          reject(err)\r\n        }\r\n        resolve(stat)\r\n      })\r\n    }),\r\n    new Promise(function (resolve, reject) {\r\n      fs.stat(`${rootXml}/${offers}.gz`, function (err, stat) {\r\n        if (err) {\r\n          reject(err)\r\n        }\r\n        resolve(stat)\r\n      })\r\n    }),\r\n    new Promise(function (resolve, reject) {\r\n      fs.stat(`${rootXml}/${storesName}.gz`, function (err, stat) {\r\n        if (err) {\r\n          reject(err)\r\n        }\r\n        resolve(stat)\r\n      })\r\n    }),\r\n    new Promise(function (resolve, reject) {\r\n      fs.stat(`${rootXml}/${categoriesName}.gz`, function (err, stat) {\r\n        if (err) {\r\n          reject(err)\r\n        }\r\n        resolve(stat)\r\n      })\r\n    }),\r\n    new Promise(function (resolve, reject) {\r\n      fs.stat(`${rootXml}/${elBuenFinName}.gz`, function (err, stat) {\r\n        if (err) {\r\n          reject(err)\r\n        }\r\n        resolve(stat)\r\n      })\r\n    })\r\n  ]\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    Promise.all(iterable)\r\n      .then(function (results) {\r\n        var content = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n        <sitemapindex xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\r\n        <sitemap>\r\n          <loc>${config.host}/${pagesName}.gz</loc>\r\n          <lastmod>${utils.getDate(results[0].mtime)}</lastmod>\r\n        </sitemap>\r\n        <sitemap>\r\n          <loc>${config.host}/${offers}.gz</loc>\r\n          <lastmod>${utils.getDate(results[1].mtime)}</lastmod>\r\n        </sitemap>\r\n        <sitemap>\r\n          <loc>${config.host}/${storesName}.gz</loc>\r\n          <lastmod>${utils.getDate(results[2].mtime)}</lastmod>\r\n        </sitemap>\r\n        <sitemap>\r\n          <loc>${config.host}/${categoriesName}.gz</loc>\r\n          <lastmod>${utils.getDate(results[3].mtime)}</lastmod>\r\n        </sitemap>\r\n        <sitemap>\r\n          <loc>${config.host}/${elBuenFinName}.gz</loc>\r\n          <lastmod>${utils.getDate(results[4].mtime)}</lastmod>\r\n        </sitemap>\r\n        </sitemapindex>`\r\n\r\n        fs.writeFile(rootXml + '/sitemap.xml', content, 'utf8', function (err) {\r\n          if (err) {\r\n            console.log(Error(err))\r\n            reject(Error(err))\r\n          }\r\n          smUtils.compress(rootXml + '/sitemap.xml')\r\n          console.log('Index sitemap is created :=)')\r\n          resolve('Index sitemap is created :=)')\r\n        })\r\n      })\r\n      .catch(function (err) {\r\n        console.log(Error(err))\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\nfunction ping () {\r\n  if (config.app_status === 'deploy') {\r\n    request('https://www.google.com/webmasters/sitemaps/ping?sitemap=https://www.ofertadeo.com/sitemap.xml', function (error, response, body) {\r\n      if (error) {\r\n        console.log('------------------------------------------')\r\n        console.log(utils.getDate())\r\n        console.log('error: ', error)\r\n        console.log('------------------------------------------')\r\n        return\r\n      }\r\n      console.log('------------------------------------------')\r\n      console.log(utils.getDate())\r\n      console.log('success ping to GOOGLE sitemap!!:')\r\n      console.log('------------------------------------------')\r\n      console.log(body)\r\n    })\r\n\r\n    request('https://www.bing.com/webmaster/ping.aspx?siteMap=https://www.ofertadeo.com/sitemap.xml', function (error, response, body) {\r\n      if (error) {\r\n        console.log('------------------------------------------')\r\n        console.log(utils.getDate())\r\n        console.log('error: ', error)\r\n        console.log('------------------------------------------')\r\n        return\r\n      }\r\n      console.log('------------------------------------------')\r\n      console.log(utils.getDate())\r\n      console.log('success ping to BING sitemap!!:')\r\n      console.log('------------------------------------------')\r\n      console.log(body)\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  index: smIndex,\r\n  pages: smPages,\r\n  offers: smOffers,\r\n  stores: smStores,\r\n  elBuenFin: smElBuenFin,\r\n  categories: smCategories,\r\n  ping: ping\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/sitemaps/create-sitemap.js","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"node-cron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-cron\"\n// module id = 9\n// module chunks = 0","import { Nuxt, Builder } from 'nuxt'\nimport express from 'express'\nimport compression from 'compression'\nimport helmet from 'helmet'\nimport api from './api'\nimport bodyParser from 'body-parser'\nimport morgan from 'morgan'\nimport rfs from 'rotating-file-stream'\nimport path from 'path'\nimport fs from 'fs'\nimport sitemapSchedule from './utils/sitemaps/schedule'\n// For authentication\nimport session from 'express-session'\nimport passport from 'passport'\nimport cookieParser from 'cookie-parser'\nimport flash from 'connect-flash'\nimport configPassport from './utils/passport/'\nimport routes from './routes'\n\nconst develop = !(process.env.NODE_ENV === 'production')\nconst app = express()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || 3000\nlet morganFormat = 'combined'\n\nlet logDirectory = path.join(__dirname, '../log')\n// ensure log directory exists\nfs.existsSync(logDirectory) || fs.mkdirSync(logDirectory)\n// create a rotating write stream\nvar accessLogStream = rfs('access.log', {\n  interval: '1d', // rotate daily\n  path: logDirectory\n})\n\napp.set('port', port)\n\n// For some reason in develop, express precondition provoke an error when the user load more\n// offers using ajax\nif (!develop) {\n  // const preconditions = require('express-preconditions');\n  // app.use(preconditions())\n  // morganFormat = 'dev'\n}\n\napp.use(morgan(morganFormat, { stream: accessLogStream }))\n\n\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: false }))\napp.use(cookieParser())\napp.use(session({ secret: \"Cdovps_2017*\" }))\napp.use(passport.initialize())\napp.use(passport.session())\napp.use(flash())\n\n// Security\napp.use(helmet())\napp.disable('x-powered-by')\n\n\nconfigPassport(passport)\n// Import API Routes\napp.use('/api', api)\n\nroutes(app, passport)\n\n// Import and Set Nuxt.js options\nlet nuxtConfig = require('../nuxt.config.js')\nnuxtConfig.dev = develop\n\n// Init Nuxt.js\nconst nuxt = new Nuxt(nuxtConfig)\n// before nuxt render to compress data\napp.set('view cache', true)// Cache template compilation\napp.use(compression())// Compress all the data that the server response\n\n// Build only in dev mode\nif (nuxtConfig.dev) {\n  const builder = new Builder(nuxt)\n  builder.build()\n    .catch((error) => {\n      console.error(error) // eslint-disable-line no-console\n      process.exit(1)\n    })\n}\n\n// At the end because it won't call next()\napp.use(nuxt.render)\n\n// Listen the server\napp.listen(port)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"helmet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"helmet\"\n// module id = 13\n// module chunks = 0","let router = require('express').Router()\nlet config = require('../config.js')\nlet conn = require('../db/connection.js')(config)\nlet crud = require('../db/crud.js')\nlet commonDbParams = require('../db/common-db-params.js')\nlet csm = require('../utils/sitemaps/create-sitemap.js')\nlet feed = require('../utils/feed/')\nlet pn = require('../utils/pn/')\n\nlet home = require('./home')\nlet categories = require('./categories')\nlet promotions = require('./promotions')\nlet stores = require('./stores')\nlet upload = require('./upload')\nlet seo = require('./seo')\nlet elBuenFin = require('./elBuenFin')\n\n// router.all('*', function(req, res, next) {\n//   console.log(req.path)\n\n//   //if is autthenticated got to next\n//   next() //to allow other middlewares to be executed\n\n//   //otherwise redirect\n// })\n\nhome({ router: router, crud: crud, conn: conn, config: config })\n\ncategories({\n  conn: conn,\n  config: config,\n  crud: crud,\n  router: router,\n  handler: require('./handlers/categories'),\n  csm: csm,\n  commonDbParams: commonDbParams\n})\n\npromotions({\n  conn: conn,\n  config: config,\n  crud: crud,\n  router: router,\n  handler: require('./handlers/promotions'),\n  csm: csm,\n  feed: feed,\n  pn: pn\n})\n\nstores({\n  conn: conn,\n  config: config,\n  crud: crud,\n  router: router,\n  handler: require('./handlers/stores'),\n  csm: csm,\n  commonDbParams: commonDbParams\n})\n\nupload({\n  conn: conn,\n  config: config,\n  crud: crud,\n  router: router,\n  handler: require('./handlers/upload')\n})\n\nseo({\n  conn: conn,\n  config: config,\n  crud: crud,\n  router: router,\n  handler: require('./handlers/seo')\n})\n\nelBuenFin({\n  conn: conn,\n  config: config,\n  crud: crud,\n  router: router,\n  handler: require('./handlers/elBuenFin'),\n  csm: csm,\n  commonDbParams: commonDbParams\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 15\n// module chunks = 0","module.exports = {\n  groupAlphabeticallyInSwitch: {\n    branches: [\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'a' ] },\n        then: '0-F'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'b' ] },\n        then: '0-F'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'c' ] },\n        then: '0-F'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'd' ] },\n        then: '0-F'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'e' ] },\n        then: '0-F'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'f' ] },\n        then: '0-F'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'g' ] },\n        then: 'G-L'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'h' ] },\n        then: 'G-L'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'i' ] },\n        then: 'G-L'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'j' ] },\n        then: 'G-L'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'k' ] },\n        then: 'G-L'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'l' ] },\n        then: 'G-L'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'm' ] },\n        then: 'M-Q'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'n' ] },\n        then: 'M-Q'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'ñ' ] },\n        then: 'M-Q'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'o' ] },\n        then: 'M-Q'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'p' ] },\n        then: 'M-Q'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'q' ] },\n        then: 'M-Q'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'r' ] },\n        then: 'R-V'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 's' ] },\n        then: 'R-V'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 't' ] },\n        then: 'R-V'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'u' ] },\n        then: 'R-V'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'v' ] },\n        then: 'R-V'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'w' ] },\n        then: 'W-Z'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'x' ] },\n        then: 'W-Z'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'y' ] },\n        then: 'W-Z'\n      },\n      {\n        case: { $eq: [ { $substrCP: ['$_id', 0, 1] }, 'z' ] },\n        then: 'W-Z'\n      }\n    ],\n    default: '0-F'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/db/common-db-params.js","var sm = require('sitemap')\r\nvar config = require('../../config.js')\r\nvar fs = require('fs')\r\nvar zlib = require('zlib')\r\nvar utils = require('../index.js')\r\n\r\nfunction compress (path) {\r\n  var readable = fs.createReadStream(path)\r\n  var writable = fs.createWriteStream(path + '.gz')\r\n  var gzip = zlib.createGzip()\r\n\r\n  return readable.pipe(gzip).pipe(writable)\r\n}\r\n\r\nfunction createSitemap () {\r\n  var sitemap = sm.createSitemap({\r\n    hostname: config.host,\r\n    xmlNs: `xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"\r\n      xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"\r\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n      xmlns:xhtml=\"http://www.w3.org/1999/xhtml\"\r\n      xsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\"`\r\n  })\r\n\r\n  return sitemap\r\n}\r\n\r\nfunction addToSitemap (sitemap, data, params) {\r\n  data.forEach(function (current) {\r\n    var obj = {\r\n      url: params.route + '/' + current.slug,\r\n      changefreq: params.changefreq || 'daily',\r\n      priority: params.priority || 0.5,\r\n      lastmodISO: utils.getDate(current.modified)\r\n    }\r\n\r\n    if (current.img) {\r\n      obj.img = {\r\n        url: current.img,\r\n        caption: current.img_alt,\r\n        title: current.img_title\r\n      }\r\n    }\r\n\r\n    sitemap.add(obj)\r\n  })\r\n\r\n  return sitemap\r\n}\r\n\r\nfunction createSitemapFile (sitemap, params) {\r\n  return new Promise(function (resolve, reject) {\r\n    fs.writeFile(params.sitemap_path, sitemap.toString(), function (err) {\r\n      if (err) {\r\n        console.log(err)\r\n        reject(err)\r\n      }\r\n\r\n      var readable = fs.createReadStream(params.sitemap_path)\r\n      var writable = fs.createWriteStream(params.sitemap_path + '.gz')\r\n      var gzip = zlib.createGzip()\r\n\r\n      readable.pipe(gzip).pipe(writable)\r\n\r\n      gzip\r\n        .on('error', function (err) {\r\n          console.log(err)\r\n          reject(err)\r\n        })\r\n        .on('end', function () {\r\n          writable.end()\r\n          console.log(params.sitemap_path + ' sitemap file is compressed!!')\r\n          resolve(params.sitemap_path + ' sitemap file is compressed!!')\r\n        })\r\n    })\r\n  })\r\n}\r\n\r\nmodule.exports = {\r\n  createSitemap: createSitemap,\r\n  createSitemapFile: createSitemapFile,\r\n  compress: compress,\r\n  addToSitemap: addToSitemap\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/sitemaps/utils.js","module.exports = require(\"sitemap\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sitemap\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"zlib\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"zlib\"\n// module id = 19\n// module chunks = 0","var config = require('../../config.js')\nvar Feed = require('./feed')\nvar fs = require('fs')\nvar striptags = require('striptags')\nvar utils = require('../index.js')\nvar cron = require('node-cron')\n\nvar rootFeed = config.paths.feed\n\nmodule.exports = {\n\n  create () {\n    utils.getCrud()\n      .then(function (crud) {\n        return crud.getItems({\n          collection: config.db.collections.main,\n          items_per_page: 10,\n          sort: { published: -1 }\n        })\n      })\n      .then(function (docs) {\n        var feedXml = new Feed({\n          title: config.txt.feed.title,\n          description: config.txt.feed.description,\n          link: config.host,\n          image: config.host + '/logo.png',\n          favicon: config.host + '/favicons/favicon.ico',\n          copyright: 'Ofertadeo',\n          updated: new Date(),\n          generator: 'ofertadeo',\n          feedLinks: {\n            json: config.host + '/feed/feed-json.json',\n            atom: config.host + '/feed/feed-atom.xml'\n          }\n        })\n\n        docs.forEach(function (doc) {\n          let content = striptags(doc.content)\n          let description = content.slice(0, 200)\n          if (description.length === 200) {\n            description += '...'\n          }\n          feedXml.addItem({\n            title: doc.title,\n            link: config.host + config.routes.main + '/' + doc.slug,\n            description: description,\n            content: description,\n            category: doc.categories[0],\n            date: doc.published,\n            image: doc.img\n          })\n        })\n\n        fs.writeFile(rootFeed + '/feed-rss2.xml', feedXml.rss2(), 'utf8', function (err) {\n          if (err) {\n            return console.log(err)\n          }\n          console.log('RSS2 was created :=)')\n        })\n\n        fs.writeFile(rootFeed + '/feed-atom.xml', feedXml.atom1(), 'utf8', function (err) {\n          if (err) {\n            return console.log(err)\n          }\n          console.log('Atom was created :=)')\n        })\n\n        fs.writeFile(rootFeed + '/feed-json.json', feedXml.atom1(), 'utf8', function (err) {\n          if (err) {\n            return console.log(err)\n          }\n          console.log('JSON was created :=)')\n        })\n      })\n      .then(function () {\n        console.log('OK')\n      })\n      .catch(function (err) {\n        console.log(err)\n      })\n  },\n\n  schedule () {\n    var index = this\n    // cron.schedule('*/1 * * * *', function (){\n    cron.schedule('1 12 * * *', function () { // run every day at 12:00 hrs\n      utils\n        .checkIfNewOffers()\n        .then(function (res) {\n          console.log('feedburne')\n          if (res && res.news) {\n            index.create()\n          }\n          console.log(res)\n        }).catch(function (err) {\n          console.log(err)\n        })\n    })\n\n    // cron.schedule('*/1 * * * *', function (){\n    cron.schedule('50 23 * * *', function () { // run every day at 23:50 hours\n      utils\n        .checkIfNewOffers()\n        .then(function (res) {\n          console.log('feedburne')\n          if (res && res.news) {\n            index.create()\n          }\n          console.log(res)\n        }).catch(function (err) {\n          console.log(err)\n        })\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/feed/index.js","var xml = require('xml')\nvar utils = require('../index')\n\nconst GENERATOR = 'Feed for Node.js'\nconst DOCTYPE = '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n'\n\nclass Feed {\n  constructor (options) {\n    this.options = options\n    this.items = []\n    this.categories = []\n    this.contributors = []\n  }\n\n  addItem (item) {\n    this.items.push(item)\n  }\n\n  addCategory (category) {\n    this.categories.push(category)\n  }\n\n  addContributor (contributor) {\n    this.contributors.push(contributor)\n  }\n\n  render (format) {\n    console.warn('DEPRECATED: use atom1() or rss2() instead of render()')\n    if (format === 'atom-1.0') {\n      return this.atom1()\n    } else {\n      return this.rss2()\n    }\n  }\n\n  atom1 () {\n    const { options } = this\n\n    let feed = [\n      { _attr: { xmlns: 'http://www.w3.org/2005/Atom' } },\n      { id: options.id },\n      { title: options.title },\n      { updated: (options.updated ? utils.getDate(options.updated) : utils.getDate(new Date())) },\n      { generator: options.generator || GENERATOR }\n    ]\n\n    let root = [{ feed }]\n\n    if (options.author) {\n      const { name, email, link } = options.author\n      let author = []\n\n      if (name) {\n        author.push({ name })\n      }\n\n      if (email) {\n        author.push({ email })\n      }\n\n      if (link) {\n        author.push({ uri: link })\n      }\n\n      feed.push({ author })\n    }\n\n    // link (rel=\"alternate\")\n    if (options.link) {\n      feed.push({ link: { _attr: { rel: 'alternate', href: options.link } } })\n    }\n\n    // link (rel=\"self\")\n    const atomLink = options.feed || (options.feedLinks && options.feedLinks.atom)\n    if (atomLink) {\n      feed.push({ 'link': { _attr: { rel: 'self', href: atomLink } } })\n    }\n\n    // link (rel=\"hub\")\n    if (options.hub) {\n      feed.push({ link: { _attr: { rel: 'hub', href: options.hub } } })\n    }\n\n    /**************************************************************************\n     * \"feed\" node: optional elements\n     *************************************************************************/\n\n    if (options.description) {\n      feed.push({ subtitle: options.description })\n    }\n\n    if (options.image) {\n      feed.push({ logo: options.image })\n    }\n\n    if (options.favicon) {\n      feed.push({ icon: options.favicon })\n    }\n\n    if (options.copyright) {\n      feed.push({ rights: options.copyright })\n    }\n\n    this.categories.forEach(category => {\n      feed.push({ category: [{ _attr: { term: category } }] })\n    })\n\n    this.contributors.forEach(item => {\n      const { name, email, link } = item\n      let contributor = []\n\n      if (name) {\n        contributor.push({ name })\n      }\n\n      if (email) {\n        contributor.push({ email })\n      }\n\n      if (link) {\n        contributor.push({ uri: link })\n      }\n\n      feed.push({ contributor })\n    })\n\n    // icon\n\n    /**************************************************************************\n     * \"entry\" nodes\n     *************************************************************************/\n    this.items.forEach(item => {\n      //\n      // entry: required elements\n      //\n\n      let entry = [\n        { title: { _attr: { type: 'html' }, _cdata: item.title } },\n        { id: item.id || item.link },\n        { link: [{ _attr: { href: item.link } }] },\n        { updated: utils.getDate(item.date) }\n      ]\n\n      //\n      // entry: recommended elements\n      //\n      if (item.description) {\n        entry.push({ summary: { _attr: { type: 'html' }, _cdata: item.description } })\n      }\n\n      if (item.content) {\n        entry.push({ content: { _attr: { type: 'html' }, _cdata: item.content } })\n      }\n\n      // entry author(s)\n      if (Array.isArray(item.author)) {\n        item.author.forEach(oneAuthor => {\n          const { name, email, link } = oneAuthor\n          let author = []\n\n          if (name) {\n            author.push({ name })\n          }\n\n          if (email) {\n            author.push({ email })\n          }\n\n          if (link) {\n            author.push({ uri: link })\n          }\n\n          entry.push({ author })\n        })\n      }\n\n      // content\n\n      // link - relative link to article\n\n      //\n      // entry: optional elements\n      //\n\n      // category\n\n      // contributor\n      if (Array.isArray(item.contributor)) {\n        item.contributor.forEach(item => {\n          const { name, email, link } = item\n          let contributor = []\n\n          if (name) {\n            contributor.push({ name })\n          }\n\n          if (email) {\n            contributor.push({ email })\n          }\n\n          if (link) {\n            contributor.push({ uri: link })\n          }\n\n          entry.push({ contributor })\n        })\n      }\n\n      // published\n      if (item.published) {\n        entry.push({ published: utils.getDate(item.published) })\n      }\n\n      // source\n\n      // rights\n      if (item.copyright) {\n        entry.push({ rights: item.copyright })\n      }\n\n      feed.push({ entry: entry })\n    })\n\n    return DOCTYPE + xml(root, true)\n  }\n\n  rss2 () {\n    const { options } = this\n    let isAtom = false\n    let isContent = false\n\n    let channel = [\n      { title: options.title },\n      { link: options.link },\n      { description: options.description },\n      { lastBuildDate: (options.updated ? utils.getDate(options.updated) : utils.getDate(new Date())) },\n      { docs: 'http://blogs.law.harvard.edu/tech/rss' },\n      { generator: options.generator || GENERATOR }\n    ]\n\n    let rss = [\n      { _attr: { version: '2.0' } },\n      { channel }\n    ]\n\n    let root = [{ rss }]\n\n    /**\n     * Channel Image\n     * http://cyber.law.harvard.edu/rss/rss.html#ltimagegtSubelementOfLtchannelgt\n     */\n    if (options.image) {\n      channel.push({\n        image: [\n          { title: options.title },\n          { url: options.image },\n          { link: options.link }\n        ]\n      })\n    }\n\n    /**\n     * Channel Copyright\n     * http://cyber.law.harvard.edu/rss/rss.html#optionalChannelElements\n     */\n    if (options.copyright) {\n      channel.push({ copyright: options.copyright })\n    }\n\n    /**\n     * Channel Categories\n     * http://cyber.law.harvard.edu/rss/rss.html#comments\n     */\n    this.categories.forEach(category => {\n      channel.push({ category })\n    })\n\n    /**\n     * Feed URL\n     * http://validator.w3.org/feed/docs/warning/MissingAtomSelfLink.html\n     */\n    const atomLink = options.feed || (options.feedLinks && options.feedLinks.atom)\n    if (atomLink) {\n      isAtom = true\n\n      channel.push({\n        'atom:link': {\n          _attr: {\n            href: atomLink,\n            rel: 'self',\n            type: 'application/rss+xml'\n          }\n        }\n      })\n    }\n\n    /**\n     * Hub for PubSubHubbub\n     * https://code.google.com/p/pubsubhubbub/\n     */\n    if (options.hub) {\n      isAtom = true\n      channel.push({\n        'atom:link': {\n          _attr: {\n            href: options.hub,\n            rel: 'hub'\n          }\n        }\n      })\n    }\n\n    /**\n     * Channel Categories\n     * http://cyber.law.harvard.edu/rss/rss.html#hrelementsOfLtitemgt\n     */\n    this.items.forEach(entry => {\n      let item = []\n\n      if (entry.title) {\n        item.push({ title: { _cdata: entry.title } })\n      }\n\n      if (entry.link) {\n        item.push({ link: entry.link })\n      }\n\n      if (entry.guid) {\n        item.push({ guid: entry.guid })\n      } else if (entry.link) {\n        item.push({ guid: entry.link })\n      }\n\n      if (entry.date) {\n        item.push({ pubDate: utils.getDate(entry.date, 'GMT') })\n      }\n\n      if (entry.description) {\n        item.push({ description: { _cdata: entry.description } })\n      }\n\n      if (entry.content) {\n        isContent = true\n        item.push({ 'content:encoded': { _cdata: entry.content } })\n      }\n      /**\n       * Item Author\n       * http://cyber.law.harvard.edu/rss/rss.html#ltauthorgtSubelementOfLtitemgt\n       */\n      if (Array.isArray(entry.author)) {\n        entry.author.some(author => {\n          if (author.email && author.name) {\n            item.push({ author: author.email + ' (' + author.name + ')' })\n            return true\n          } else {\n            return false\n          }\n        })\n      }\n\n      if (item.image) {\n        item.push({ enclosure: [{ _attr: { url: entry.image } }] })\n      }\n\n      channel.push({ item })\n    })\n\n    if (isContent) {\n      rss[0]._attr['xmlns:content'] = 'http://purl.org/rss/1.0/modules/content/'\n    }\n\n    if (isAtom) {\n      rss[0]._attr['xmlns:atom'] = 'http://www.w3.org/2005/Atom'\n    }\n\n    return DOCTYPE + xml(root, true)\n  }\n\n  json1 () {\n    const { options, items } = this\n    let feed = {\n      version: 'https://jsonfeed.org/version/1',\n      title: options.title\n    }\n\n    if (options.link) {\n      feed.home_page_url = options.link\n    }\n\n    if (options.feedLinks && options.feedLinks.json) {\n      feed.feed_url = options.feedLinks.json\n    }\n\n    if (options.description) {\n      feed.description = options.description\n    }\n\n    if (options.image) {\n      feed.icon = options.image\n    }\n\n    if (options.author) {\n      feed.author = {}\n      if (options.author.name) {\n        feed.author.name = options.author.name\n      }\n      if (options.author.link) {\n        feed.author.url = options.author.link\n      }\n    }\n    feed.items = items.map(item => {\n      let feedItem = {\n        id: item.id,\n        // json_feed distinguishes between html and text content\n        // but since we only take a single type, we'll assume HTML\n        html_content: item.content\n      }\n      if (item.link) {\n        feedItem.url = item.link\n      }\n      if (item.title) {\n        feedItem.title = item.title\n      }\n      if (item.description) {\n        feedItem.summary = item.description\n      }\n\n      if (item.image) {\n        feedItem.image = item.image\n      }\n\n      if (item.date) {\n        feedItem.date_modified = utils.getDate(item.date)\n      }\n      if (item.published) {\n        feedItem.date_published = utils.getDate(item.published)\n      }\n\n      if (item.author) {\n        let author = item.author\n        if (author instanceof Array) {\n          // json feed only supports 1 author per post\n          author = author[0]\n        }\n        feedItem.author = {}\n        if (author.name) {\n          feedItem.author.name = author.name\n        }\n        if (author.link) {\n          feedItem.author.url = author.link\n        }\n      }\n      return feedItem\n    })\n\n    return JSON.stringify(feed, null, 4)\n  }\n\n  ISODateString (d) {\n    function pad (n) {\n      return n < 10 ? '0' + n : n\n    }\n\n    return d.getUTCFullYear() + '-' +\n      pad(d.getUTCMonth() + 1) + '-' +\n      pad(d.getUTCDate()) + 'T' +\n      pad(d.getUTCHours()) + ':' +\n      pad(d.getUTCMinutes()) + ':' +\n      pad(d.getUTCSeconds()) + 'Z'\n  }\n}\n\nmodule.exports = Feed\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/feed/feed.js","module.exports = require(\"xml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"xml\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"striptags\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"striptags\"\n// module id = 23\n// module chunks = 0","var config = require('../../config.js')\nvar request = require('request')\nvar apiKey = '61e4d89d5d5d1391dc97ca0c471003d4'\nif (config.app_status === 'deploy') {\n  apiKey = 'e5dd4f8caaa635b423152ea1ad66ded8'\n}\n\nmodule.exports = {\n  all (data) {\n    request({\n      url: 'https://pushcrew.com/api/v1/send/all',\n      headers: {\n        'Authorization': 'key=' + apiKey\n      },\n      method: 'POST'\n    })\n      .form(data)\n      .on('response', function (response) {\n        console.log('Respuesta de https://pushcrew.com/api/v1/send/all')\n        console.log(response.status)\n        console.log(response.request_id)\n        console.log(response.statusCode)\n        console.log(response.statusMessage)\n      })\n      .on('error', function (err) {\n        console.log('Error de https://pushcrew.com/api/v1/send/all')\n        console.log(err)\n      })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/pn/index.js","'use strict'\r\n\r\nmodule.exports = function (params) {\r\n  params.conn\r\n    .then(function (db) {\r\n      return params.crud({ db: db, config: params.config })\r\n    })\r\n    .then(function (crud) {\r\n      if (crud) {\r\n        index({ crud: crud, config: params.config, router: params.router })\r\n      } else {\r\n        console.log('There is not database instance')\r\n      }\r\n    })\r\n    .catch(function (err) {\r\n    // some configuration to notify no database connection working\r\n      console.log(err)\r\n    })\r\n}\r\n\r\n// We can define functions after use them because of function hoisting\r\nfunction index (params) {\r\n  let crudInst = params.crud\r\n  let conf = params.config\r\n  params.router.get('/home', function (req, res) {\r\n    let page = req.query.page ? Number(req.query.page) : 0\r\n    let iterable = [\r\n      crudInst.getItems({\r\n        collection: conf.db.collections.main,\r\n        items_per_page: conf.db.itemsPerPage,\r\n        skip: conf.db.itemsPerPage * page,\r\n        sort: { published: -1 },\r\n        projection: {\r\n          name: 1,\r\n          thumbnail: 1,\r\n          stores: 1,\r\n          slug: 1,\r\n          meta_description: 1,\r\n          img: 1,\r\n          img_data: 1,\r\n          img_alt: 1,\r\n          img_title: 1,\r\n          title: 1,\r\n          published: 1,\r\n          modified: 1\r\n        }\r\n      }),\r\n      crudInst.getPagination({\r\n        collection: conf.db.collections.main\r\n      })\r\n    ]\r\n\r\n    Promise.all(iterable)\r\n      .then(function (results) {\r\n        res.json({\r\n          items: results[0],\r\n          pagination: results[1]\r\n        })\r\n      })\r\n      .catch(function (error) {\r\n        res.json(error)\r\n      })\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/home.js","'use strict'\n\nmodule.exports = function (params) {\n  params.conn\n    .then(function (db) {\n      return params.crud({ db: db, config: params.config })\n    })\n    .then(function (crud) {\n      if (crud) {\n        params.handler({\n          crud: crud,\n          config: params.config,\n          router: params.router,\n          csm: params.csm,\n          commonDbParams: params.commonDbParams\n        })\n          .getById()\n          .getIndex()\n          .getFormData()\n          .save({ path: '/categories/new' }) // Create new category\n          .save({ path: '/categories/edit/:id' }) // Edit a category\n      } else {\n        console.log('There is not database instance')\n      }\n    })\n    .catch(function (error) {\n      console.log(error)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/categories.js","\n'use strict'\n\nmodule.exports = function (params) {\n  params.conn\n    .then(function (db) {\n      return params.crud({ db: db, config: params.config })\n    })\n    .then(function (crud) {\n      if (crud) {\n        params.handler({\n          crud: crud,\n          config: params.config,\n          router: params.router,\n          csm: params.csm,\n          feed: params.feed,\n          pn: params.pn\n        })\n          .getBySlug()\n          .existsBySlug()\n          .getFormData()\n          .save({ path: '/promotions/new' }) // Create new Offer\n          .save({ path: '/promotions/edit/:slug' }) // Edit an Offer\n      }\n    })\n    .catch(function (err) {\n    // some configuration to notify no database connection working\n      console.log(err)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/promotions.js","'use strict'\n\nmodule.exports = function (params) {\n  params.conn\n    .then(function (db) {\n      return params.crud({ db: db, config: params.config })\n    })\n    .then(function (crud) {\n      if (crud) {\n        params.handler({\n          crud: crud,\n          router: params.router,\n          config: params.config,\n          csm: params.csm,\n          commonDbParams: params.commonDbParams\n        })\n          .getById()\n          .getIndex()\n          .getFormData()\n          .save({ path: '/stores/new' }) // Create new store\n          .save({ path: '/stores/edit/:id' }) // Edit an store\n      }\n    })\n    .catch(function (err) {\n    // some configuration to notify no database connection working\n      console.log(err)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/stores.js","'use strict'\n\nmodule.exports = function (params) {\n  params.conn\n    .then(function (db) {\n      return params.crud({ db: db, config: params.config })\n    })\n    .then(function (crud) {\n      if (crud) {\n        params.handler({ crud: crud, config: params.config, router: params.router })\n          .upload()\n      } else {\n        console.log('There is no crud instance')\n      }\n    })\n    .catch(function (err) {\n    // some configuration to notify no database connection working\n      console.log(err)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/upload.js","'use strict'\n\nmodule.exports = function (params) {\n  params.conn\n    .then(function (db) {\n      return params.crud({ db: db, config: params.config })\n    })\n    .then(function (crud) {\n      if (crud) {\n        params.handler({ crud: crud, config: params.config, router: params.router })\n          .save()\n          .get()\n      }\n    })\n    .catch(function (err) {\n    // some configuration to notify no database connection working\n      console.log(err)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/seo.js","'use strict'\n\nmodule.exports = function (params) {\n  params.conn\n    .then(function (db) {\n      return params.crud({ db: db, config: params.config })\n    })\n    .then(function (crud) {\n      if (crud) {\n        params.handler({\n          crud: crud,\n          router: params.router,\n          config: params.config,\n          csm: params.csm,\n          commonDbParams: params.commonDbParams\n        })\n          .getById()\n          .getIndex()\n          .getFormData()\n          .existsBySlug()\n          .getStores()\n          .save({ path: '/el-buen-fin/new' }) // Create new store\n          .save({ path: '/el-buen-fin/edit/:id' }) // Edit an store\n      }\n    })\n    .catch(function (err) {\n    // some configuration to notify no database connection working\n      console.log(err)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/elBuenFin.js","module.exports = function (spec) {\n  let that = {}\n  spec = spec || {}\n\n  function getById () {\n    let conf = spec.config\n    let crudInst = spec.crud\n\n    spec.router.get('/categories/:_id', function (req, res) {\n      let page = req.query.page ? Number(req.query.page) : 0\n\n      let iterable = [\n        crudInst.getItems({\n          collection: conf.db.collections.main,\n          query: { 'categories._id': req.params._id },\n          items_per_page: conf.db.itemsPerPage,\n          skip: conf.db.itemsPerPage * page,\n          sort: { published: -1 },\n          projection: {\n            name: 1,\n            thumbnail: 1,\n            stores: 1,\n            slug: 1,\n            meta_description: 1,\n            img: 1,\n            img_data: 1,\n            img_alt: 1,\n            img_title: 1,\n            published: 1,\n            modified: 1\n          }\n        }),\n        crudInst.getItem({\n          collection: conf.db.collections.categories,\n          query: { _id: req.params._id },\n          projection: {\n            name: 1,\n            thumbnail: 1,\n            slug: 1,\n            content: 1,\n            title: 1,\n            h1: 1,\n            h2: 1,\n            meta_title: 1,\n            meta_description: 1,\n            img: 1,\n            img_alt: 1,\n            img_title: 1,\n            img_data: 1\n          }\n        }),\n        crudInst.getPagination({\n          query: { 'categories._id': req.params._id },\n          collection: conf.db.collections.main\n        }),\n        crudInst.getItem({\n          collection: conf.db.collections.seo,\n          query: { _id: 'categories' }\n        })\n      ]\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            items: results[0],\n            info: results[1],\n            pagination: results[2],\n            seo: results[3]\n          })\n        })\n        .catch(function (error) {\n          res.json(error)\n        })\n    })\n\n    return that\n  }\n\n  function getIndex (params) {\n    let conf = spec.config\n    let crudInst = spec.crud\n\n    spec.router.get('/categories', function (req, res) {\n      // let page = req.query.page ? Number(req.query.page) : 0\n      let iterable = [\n        crudInst.aggregate(\n          {\n            collection: conf.db.collections.categories,\n            pipeline: [\n              { $limit: 100 }, // Primiero limitar la cantidad\n              // Ordenarlo por nombre para obtener el arreglo stores en el sig, pipe ordenado alfabeticamente en orden ascendente\n              { $sort: { name: 1 } },\n              { $project: {\n                // A mayusculas, porque 'e' !== 'E'\n                _id: 1,\n                name: 1,\n                slug: 1,\n                thumbnail: 1,\n                img: 1,\n                img_data: 1,\n                img_alt: 1,\n                img_title: 1,\n                published: 1,\n                modified: 1\n              }\n              },\n              {\n                $group: {\n                  _id: {\n                    $switch: spec.commonDbParams.groupAlphabeticallyInSwitch\n                  },\n                  categories: { $push: '$$CURRENT' }\n                }\n              },\n              { $sort: { _id: 1 } }\n            ], // pipeline\n            options: {\n              collation: {\n                locale: conf.db.collation.locale,\n                alternate: 'shifted'\n              }\n            } // options\n          }\n        ) // aggregate\n      ] // iterable\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            items: results[0]\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n          res.json(error)\n        })\n    }) // router.get of express\n\n    return that\n  }\n\n  function getFormData () {\n    let conf = spec.config\n    let crudInst = spec.crud\n    let router = spec.router\n    // get an specific promotion data, query by slug property\n    router.get('/formdata/categories/:id', function (req, res) {\n      let iterable = [\n        crudInst.getItem({\n          collection: conf.db.collections.categories,\n          query: { _id: req.params.id },\n          items_per_page: 1\n        })\n      ]\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            item: results[0]\n          })\n        })\n        .catch(function (error) {\n          res.json(error)\n        })\n    }) // router.get\n\n    return that\n  }\n\n  /**\n   * Creates or update a store\n   * @param  {[type]} params Until now it contains the path of the request\n   * @return {Object}        For cascade purpose\n   */\n  function save (params) {\n    let conf = spec.config\n    let crudInst = spec.crud\n\n    spec.router.post(params.path, function (req, res) {\n      let rightNow = new Date()\n      let saveMethod = 'setItem'\n      let saveParams = {\n        collection: conf.db.collections.categories\n      }\n      let data = Object.assign(req.body, { modified: rightNow })\n\n      // Al crear nueva, la fecha de publicacion y modificacion son la misma\n      if (!data.hasOwnProperty('published')) {\n        data.published = rightNow\n      } else {\n        // asegurandonos que se guarde como campo tipo fecha\n        data.published = new Date(data.published)\n      }\n\n      if (data.hasOwnProperty('_id')) {\n        saveMethod = 'update'\n        delete data._id\n        delete saveParams.document\n        saveParams.query = { _id: req.params.id }\n        saveParams.update = { $set: data }\n        saveParams.options = { upsert: true }\n      } else {\n        data._id = data.slug\n        saveParams.document = data\n      }\n\n      crudInst[saveMethod](saveParams)\n        .then(function (dbResponse) {\n        //  return response to client with res object\n          res.json(dbResponse)\n          return dbResponse\n        })\n        .catch(function (err) {\n          console.log('Ocurrió un error al tratar de Guardar una Categoría:')\n          console.log(err)\n          res.json(err)\n        })\n        .then(function (dbResponse) {\n          if (dbResponse.result && dbResponse.result.ok) {\n            return true\n          } else {\n            return Error(dbResponse)\n          }\n        })\n        .then(function (result) {\n          if (result === true) {\n            Promise.all([spec.csm.categories(), spec.csm.pages()])\n              .then(function (results) {\n                if (results && results.length > 0) {\n                  return spec.csm.index()\n                }\n              })\n              .catch(function (err) {\n                console.log(err)\n                return err\n              })\n          } else {\n            console.log(result)\n          }\n        })\n        .catch(function (err) {\n          console.log(err)\n        })\n    }) // router.post\n\n    return that\n  }\n\n  that.getIndex = getIndex\n  that.getById = getById\n  that.getFormData = getFormData\n  that.save = save\n\n  return that\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/handlers/categories.js","/**\r\n * Promotions routes and functionality for promotions requests\r\n * @param  {Object} spec Dependencies and more parameters for the correct behaviour\r\n * @return {Object}\r\n */\r\nmodule.exports = function (spec) {\r\n  let that = {}\r\n  spec = spec || {}\r\n\r\n  /**\r\n   * Manage the Offer request, query by slug property\r\n   * @return {Object} For cascade purposes\r\n   */\r\n  function getBySlug () {\r\n    let crud = spec.crud\r\n    let config = spec.config\r\n    spec.router.get('/promotions/:slug', function (req, res) {\r\n      let iterable = [\r\n        crud.getItem({\r\n          collection: config.db.collections.main,\r\n          query: { slug: req.params.slug },\r\n          items_per_page: 1\r\n        }),\r\n        crud.aggregate({\r\n          collection: config.db.collections.secundary,\r\n          pipeline: [\r\n            { $sample: { size: 15 } },\r\n            { $project: { name: 1 } }\r\n          ]\r\n        })\r\n      ]\r\n\r\n      let data = {}\r\n      return Promise.all(iterable)\r\n        .then(function (results) {\r\n          if (results && results.length > 0) {\r\n            data.item = results[0]\r\n            data.stores = results[1]\r\n            return crud.getItems({\r\n              collection: config.db.collections.main,\r\n              query: { categories: { $in: data.item.categories }, _id: { $ne: data.item._id } },\r\n              projection: {\r\n                name: 1,\r\n                thumbnail: 1,\r\n                stores: 1,\r\n                slug: 1,\r\n                meta_description: 1,\r\n                img: 1,\r\n                img_data: 1,\r\n                img_alt: 1,\r\n                img_title: 1,\r\n                categories: 1,\r\n                published: 1,\r\n                modified: 1\r\n              },\r\n              sort: { modified: -1 },\r\n              items_per_page: 4\r\n            })\r\n          } else {\r\n            return Promise.reject(new Error(results))\r\n          }\r\n        })\r\n        .then(function (relatedItems) {\r\n          data.relatedItems = relatedItems\r\n          res.json(data)\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n          res.json(error)\r\n        })\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  function existsBySlug () {\r\n    let crud = spec.crud\r\n    let config = spec.config\r\n    spec.router.get('/promotions/exists/:slug', function (req, res) {\r\n      crud.getItem({\r\n        collection: config.db.collections.main,\r\n        query: { slug: req.params.slug },\r\n        items_per_page: 1,\r\n        projection: { _id: 1 }\r\n      })\r\n        .then(function (offer) {\r\n          console.log(offer)\r\n          if (offer && offer._id) {\r\n            res.json({\r\n              success: true\r\n            })\r\n\r\n            return\r\n          }\r\n\r\n          res.json({\r\n            success: false\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n          res.json(error)\r\n        })\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * Manage the request for creating and editing Offers(promotions)\r\n   * @return {Object} For cascade purposes\r\n   */\r\n  function getFormData () {\r\n    let conf = spec.config\r\n    let crudInst = spec.crud\r\n    let router = spec.router\r\n\r\n    // formdata for create and edit promotions\r\n    router.get('/formdata/promotions', function (req, res) {\r\n      let iterable = [\r\n        crudInst.getItems({\r\n          collection: conf.db.collections.secundary,\r\n          items_per_page: 100,\r\n          projection: { name: 1 },\r\n          sort: { name: 1 }\r\n        }),\r\n        crudInst.getItems({\r\n          collection: conf.db.collections.categories,\r\n          items_per_page: 100,\r\n          projection: { name: 1 },\r\n          sort: { name: 1 }\r\n        })\r\n      ]\r\n\r\n      Promise.all(iterable)\r\n        .then(function (results) {\r\n          res.json({\r\n            stores: results[0],\r\n            categories: results[1]\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          res.json(error)\r\n        })\r\n    })\r\n\r\n    // get an specific promotion data, query by slug property\r\n    router.get('/formdata/promotions/:slug', function (req, res) {\r\n      let iterable = [\r\n        crudInst.getItem({\r\n          collection: conf.db.collections.main,\r\n          query: { slug: req.params.slug },\r\n          items_per_page: 1\r\n        }),\r\n        crudInst.getItems({\r\n          collection: conf.db.collections.secundary,\r\n          items_per_page: 100,\r\n          projection: { name: 1 },\r\n          sort: { name: 1 }\r\n        }),\r\n        crudInst.getItems({\r\n          collection: conf.db.collections.categories,\r\n          items_per_page: 100,\r\n          projection: { name: 1 },\r\n          sort: { name: 1 }\r\n        })\r\n      ]\r\n\r\n      Promise.all(iterable)\r\n        .then(function (results) {\r\n          res.json({\r\n            item: results[0],\r\n            allStores: results[1],\r\n            allCategories: results[2]\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          res.json(error)\r\n        })\r\n    })\r\n\r\n    return that\r\n  }\r\n\r\n  /**\r\n   * Updates each category and store of a promotion, so the modified property is updated.\r\n   * The modified property is useful for sitemaps, structure data and for users knowing the last update\r\n   * of the promotion.\r\n   * @param  {Object} data The object that contains an array of stores and an array of categories\r\n   * @param  {Date}   date Date for \"modified\" property for each category and store\r\n   * @return {Promise}     Promise to know when the task is done\r\n   */\r\n  function updateStoresAndCategories (data, date) {\r\n    let iterable = data.categories.map(function (currCat) {\r\n      return spec.crud.updateOne({\r\n        collection: spec.config.db.collections.categories,\r\n        query: { _id: currCat._id },\r\n        update: { $set: { modified: date } }\r\n      })\r\n    })\r\n\r\n    //  We are not using map because then we have to merge with concat and left two arrays of promises running\r\n    data.stores.forEach(function (currStore) {\r\n      iterable.push(spec.crud.updateOne({\r\n        collection: spec.config.db.collections.secundary,\r\n        query: { _id: currStore._id },\r\n        update: { $set: { modified: date } }\r\n      }))\r\n    })\r\n\r\n    return Promise.all(iterable)\r\n  }\r\n\r\n  function updateSitemaps () {\r\n    let csm = spec.csm\r\n\r\n    //  Update sitemaps\r\n    return new Promise(function (resolve, reject) {\r\n      return Promise.all([\r\n        csm.pages(),\r\n        csm.offers(),\r\n        csm.stores(),\r\n        csm.categories(),\r\n        csm.elBuenFin()\r\n      ])\r\n        .then(function (results) {\r\n          if (results && results.length > 0) {\r\n            csm.index().then(function (res) {\r\n              resolve(res)\r\n            })\r\n          }\r\n        })\r\n        .catch(function (err) {\r\n          reject(Error(err))\r\n        })\r\n    })\r\n  }\r\n\r\n  function sendPushNotification (data) {\r\n    //  Push notifications\r\n    spec.pn.all({\r\n      title: data.title,\r\n      url: spec.config.host + spec.config.routes.main + '/' + data.slug,\r\n      message: data.meta_description\r\n\r\n      //  @TODO: To set an image to the notifications using pushcrew, we need to create an PNG imgage 192X192\r\n      //  ,image_url: data.thumbnail\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Creates or update an Offer(promotion), when editing the query is by slug\r\n   * @param  {[type]} params Until now it contains the path of the request\r\n   * @return {Object}        For cascade purpose\r\n   */\r\n  function save (params) {\r\n    let conf = spec.config\r\n    let crudInst = spec.crud\r\n\r\n    spec.router.post(params.path, function (req, res) {\r\n      let rightNow = new Date()\r\n      let missingData = { modified: rightNow }\r\n      let data = Object.assign(req.body, missingData)\r\n\r\n      if (!data.hasOwnProperty('published')) {\r\n        data.published = rightNow\r\n      } else {\r\n        // asegurandonos que se guarde como un campo tipo fecha\r\n        data.published = new Date(data.published)\r\n      }\r\n\r\n      crudInst.update({\r\n        collection: conf.db.collections.main,\r\n        query: { slug: req.params.slug },\r\n        update: { $set: data },\r\n        options: {\r\n          upsert: true\r\n        }\r\n      })\r\n        .then(function (dbResponse) {\r\n        //  return response to client with res object\r\n          res.json(dbResponse)\r\n          return dbResponse\r\n        })\r\n        .catch(function (err) {\r\n          console.log('Ocurrió un error al tratar de Guardar una promoción:')\r\n          console.log(err)\r\n          res.json(err)\r\n        })\r\n        .then(function (dbResponse) {\r\n          if (dbResponse.result && dbResponse.result.ok) {\r\n            // sendPushNotification(data)\r\n\r\n            return crudInst.update({\r\n              collection: conf.db.collections.pages,\r\n              query: {},\r\n              update: { $set: { modified: rightNow } },\r\n              options: { multi: true }\r\n            })\r\n          }\r\n        })\r\n        .catch(function (err) {\r\n          console.log('Ocurrió un error al tratar de actualizar las paginas despues de guardar una promoción:')\r\n          console.log(err)\r\n        })\r\n        .then(function (dbResponse) {\r\n          if (dbResponse && dbResponse.result && dbResponse.result.ok) {\r\n            return updateStoresAndCategories({\r\n              stores: data.stores,\r\n              categories: data.categories\r\n            }, rightNow)\r\n          } else {\r\n            return Error(dbResponse)\r\n          }\r\n        })\r\n        .catch(function (err) {\r\n          console.log('Ocurrió un error al tratar de actualizar tiendas y categorias despues de guardar una promoción:')\r\n          console.log(err)\r\n        })\r\n        .then(function (results) {\r\n          if (results && results.length > 0) {\r\n          //  Update feed\r\n            spec.feed.create()\r\n            return updateSitemaps()\r\n          }\r\n        })\r\n        .catch(function (err) {\r\n          console.log('Ocurrió un error al tratar de actualizar los sitemas y el feed despues de guardar una promoción:')\r\n          console.log(err)\r\n        })\r\n    })\r\n\r\n    return that\r\n  };\r\n\r\n  that.save = save\r\n  that.getFormData = getFormData\r\n  that.getBySlug = getBySlug\r\n  that.existsBySlug = existsBySlug\r\n\r\n  return that\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/handlers/promotions.js","module.exports = function (spec) {\n  let that = {}\n  spec = spec || {}\n\n  function getById (params) {\n    let crudInst = spec.crud\n    let conf = spec.config\n\n    spec.router.get('/stores/:_id', function (req, res) {\n      var page = req.query.page ? Number(req.query.page) : 0\n      var iterable = [\n        crudInst.getItems({\n          collection: conf.db.collections.main,\n          query: { 'stores._id': req.params._id },\n          items_per_page: conf.db.itemsPerPage,\n          skip: conf.db.itemsPerPage * page,\n          sort: { published: -1 },\n          projection: {\n            name: 1,\n            thumbnail: 1,\n            stores: 1,\n            slug: 1,\n            meta_description: 1,\n            img: 1,\n            img_data: 1,\n            img_alt: 1,\n            img_title: 1,\n            categories: 1,\n            published: 1,\n            modified: 1\n          }\n        }),\n        crudInst.getItem({\n          collection: conf.db.collections.secundary,\n          query: { _id: req.params._id },\n          projection: {\n            name: 1,\n            thumbnail: 1,\n            slug: 1,\n            content: 1,\n            title: 1,\n            h1: 1,\n            h2: 1,\n            meta_title: 1,\n            meta_description: 1,\n            url_site: 1,\n            img: 1,\n            img_alt: 1,\n            img_title: 1,\n            img_data: 1\n          }\n        }),\n        crudInst.getPagination({\n          query: { 'stores._id': req.params._id },\n          collection: conf.db.collections.main\n        }),\n        crudInst.getItem({\n          collection: conf.db.collections.seo,\n          query: { _id: 'stores' }\n        })\n      ]\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            items: results[0],\n            info: results[1],\n            pagination: results[2],\n            seo: results[3]\n          })\n        })\n        .catch(function (error) {\n          res.json(error)\n        })\n    })\n\n    return that\n  }\n\n  function getIndex () {\n    let crudInst = spec.crud\n    let conf = spec.config\n\n    spec.router.get('/stores', function (req, res) {\n      // var page = req.query.page ? Number(req.query.page) : 0\n      let iterable = [\n        crudInst.aggregate(\n          {\n            collection: conf.db.collections.secundary,\n            pipeline: [\n              { $limit: 100 }, // Primiero limitar la cantidad\n              // Ordenarlo por nombre para obtener el arreglo stores en el sig, pipe ordenado alfabeticamente en orden ascendente\n              { $sort: { name: 1 } },\n              { $project: {\n                // A mayusculas, porque 'e' !== 'E'\n                _id: 1,\n                name: 1,\n                slug: 1,\n                thumbnail: 1,\n                img: 1,\n                img_data: 1,\n                img_alt: 1,\n                img_title: 1,\n                published: 1,\n                modified: 1\n              }\n              },\n              {\n                $group: {\n                  _id: {\n                    $switch: spec.commonDbParams.groupAlphabeticallyInSwitch\n                  },\n                  stores: { $push: '$$CURRENT' }\n                }\n              },\n              { $sort: { _id: 1 } }\n            ], // pipeline\n            options: {\n              collation: {\n                locale: conf.db.collation.locale,\n                alternate: 'shifted'\n              }\n            } // options\n          }\n        ) // aggregate\n      ] // iterable\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            items: results[0]\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n          res.json(error)\n        })\n    })\n\n    return that\n  }\n\n  function getFormData () {\n    let conf = spec.config\n    let crudInst = spec.crud\n    let router = spec.router\n    // get an specific promotion data, query by slug property\n    router.get('/formdata/stores/:id', function (req, res) {\n      let iterable = [\n        crudInst.getItem({\n          collection: conf.db.collections.secundary,\n          query: { _id: req.params.id },\n          items_per_page: 1\n        })\n      ]\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            item: results[0]\n          })\n        })\n        .catch(function (error) {\n          res.json(error)\n        })\n    }) // router.get\n\n    return that\n  }\n\n  /**\n   * Creates or update a store\n   * @param  {[type]} params Until now it contains the path of the request\n   * @return {Object}        For cascade purpose\n   */\n  function save (params) {\n    let conf = spec.config\n    let crudInst = spec.crud\n    let saveMethod = 'setItem'\n\n    spec.router.post(params.path, function (req, res) {\n      let rightNow = new Date()\n      let saveParams = {\n        collection: conf.db.collections.secundary\n      }\n      let data = Object.assign(req.body, { modified: rightNow })\n\n      // Al crear nueva, la fecha de publicacion y modificacion son la misma\n      if (!data.hasOwnProperty('published')) {\n        data.published = rightNow\n      } else {\n        // asegurandonos que se guarde como un campo tipo fecha\n        data.published = new Date(data.published)\n      }\n\n      if (data.hasOwnProperty('_id')) {\n        saveMethod = 'update'\n        delete data._id\n        delete saveParams.document\n        saveParams.query = { _id: req.params.id }\n        saveParams.update = { $set: data }\n        saveParams.options = { upsert: true }\n      } else {\n        data._id = data.slug\n        saveParams.document = data\n      }\n\n      crudInst[saveMethod](saveParams)\n        .then(function (dbResponse) {\n        //  return response to client with res object\n          res.json(dbResponse)\n          return dbResponse\n        })\n        .catch(function (err) {\n          console.log('Ocurrió un error al tratar de Guardar una Tienda:')\n          console.log(err)\n          res.json(err)\n        })\n        .then(function (dbResponse) {\n          if (dbResponse.result && dbResponse.result.ok) {\n            return true\n          } else {\n            return Error(dbResponse)\n          }\n        })\n        .then(function (result) {\n          if (result === true) {\n            Promise.all([spec.csm.stores(), spec.csm.pages()])\n              .then(function (results) {\n                if (results && results.length > 0) {\n                  return spec.csm.index()\n                }\n              })\n              .catch(function (err) {\n                console.log(err)\n                return err\n              })\n          } else {\n            console.log(result)\n          }\n        })\n        .catch(function (err) {\n          console.log(err)\n        })\n    }) // router.post\n\n    return that\n  }\n\n  that.save = save\n  that.getById = getById\n  that.getIndex = getIndex\n  that.getFormData = getFormData\n\n  return that\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/handlers/stores.js","let mkdirp = require('mkdirp')\nlet path = require('path')\nlet multer = require('multer')\nlet jimp = require('jimp')\n\nmodule.exports = function (spec) {\n  let that = {}\n  spec = spec || {}\n\n  function getPath (file) {\n    let date = new Date()\n    let finalPath = path.join(`${spec.config.paths.static}/uploads/${date.getFullYear()}/${(date.getMonth() + 1)}/${date.getDate()}`)\n    if (file && file.hasOwnProperty('originalname')) {\n      finalPath = `${finalPath}/{file.originalname}`\n    }\n    return finalPath\n  }\n\n  function mkdirPromise (pathFile) {\n    return new Promise(function (resolve, reject) {\n      mkdirp(pathFile, function (err) {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(`Directorio creado: ${pathFile}`)\n        }\n      })\n    })\n  }\n\n  let storage = multer.diskStorage({\n    destination: function (req, file, callback) {\n      let pathFile = getPath()\n      mkdirPromise(pathFile)\n        .then(function (success) {\n          callback(null, pathFile)\n        })\n        .catch(function (err) {\n          console.log(err)\n        })\n    },\n    filename: function (req, file, callback) {\n      callback(null, file.originalname)\n    }\n  })\n\n  let multerUpload = multer({ storage: storage }).array('offerFile', 3) // Field name and max count\n\n  function upload () {\n    spec.router.post('/upload', function (req, res) {\n      return multerUpload(req, res, function (error) {\n        if (error) {\n          res.json(error)\n        }\n\n        if (req.files && req.files[0] && req.files[0].hasOwnProperty('originalname')) {\n          let path = getPath()\n          let file = req.files[0]\n          let originalName = file.originalname\n          let name = originalName.split('.')[0]\n          let extension = originalName.split('.')[1]\n          let filePath = `${path}/${originalName}`\n          let finalRootPath = path.split(spec.config.paths.static)[1]\n\n          jimp.read(filePath)\n            .then(function (img) {\n              return img.scaleToFit(300, 300)// resize\n                .quality(50)// set JPEG quality\n                .write(`${path}/${name}_thumb.${extension}`) // save\n            }).then(function (result) {\n              res.json({\n                success: true,\n                img: spec.config.host + filePath.split(spec.config.paths.static)[1],\n                thumbnail: `${spec.config.host}${finalRootPath}/${name}_thumb.${extension}`\n              })\n            }).catch(function (err) {\n              console.log('Error al tratar de Guardar o Leer la imagen')\n              console.log(err)\n              res.json({ success: false, msg: 'Ocurrio un error al guardar la imagen revisar con el desarrollador' })\n            })\n        } else {\n          res.json({ success: false, msg: 'No obtuvimos ningun archivo de la peticón' })\n        }\n      })\n    })\n  }\n\n  that.upload = upload\n\n  return that\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/handlers/upload.js","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"jimp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jimp\"\n// module id = 38\n// module chunks = 0","module.exports = function (spec) {\n  let that = {}\n  spec = spec || {}\n\n  function get () {\n    spec.router.get('/seo/:id', function (req, res) {\n      spec.crud.getItem({\n        collection: spec.config.db.collections.seo,\n        query: { _id: req.params.id }\n      })\n        .then(function (dbRes) {\n          res.json(dbRes)\n          return dbRes\n        })\n        .catch(function (err) {\n          console.log('Ocurrió un error al tratar de conseguir la configuracion seo de tiendas:')\n          console.log(err)\n          res.json(err)\n        })\n    })\n\n    return that\n  }\n\n  function save () {\n    spec.router.post('/seo/:id', function (req, res) {\n      let rightNow = new Date()\n      let missingData = { modified: rightNow }\n\n      if (!req.body.hasOwnProperty('date')) {\n        missingData.date = rightNow\n      }\n\n      spec.crud.update({\n        collection: spec.config.db.collections.seo,\n        query: { _id: req.params.id },\n        update: { $set: Object.assign(missingData, req.body) },\n        options: { upsert: true }\n      })\n        .then(function (dbRes) {\n          res.json(dbRes)\n          return dbRes\n        })\n        .catch(function (err) {\n          console.log('Ocurrió un error al tratar de Guardar la configuracion seo de tiendas:')\n          console.log(err)\n          res.json(err)\n        })\n    })\n\n    return that\n  }\n\n  that.get = get\n  that.save = save\n\n  return that\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/handlers/seo.js","module.exports = function (spec) {\n  let that = {}\n  spec = spec || {}\n  let elBuenFinCategory = 'el-buen-fin'\n\n  function getById (params) {\n    let crudInst = spec.crud\n    let conf = spec.config\n\n    spec.router.get('/el-buen-fin/stores/:_id', function (req, res) {\n      var page = req.query.page ? Number(req.query.page) : 0\n      var iterable = [\n        crudInst.getItems({\n          collection: conf.db.collections.main,\n          query: { 'stores._id': req.params._id, 'categories._id': elBuenFinCategory },\n          items_per_page: conf.db.itemsPerPage,\n          skip: conf.db.itemsPerPage * page,\n          sort: { published: -1 },\n          projection: {\n            name: 1,\n            thumbnail: 1,\n            elBuenFin: 1,\n            slug: 1,\n            meta_description: 1,\n            img: 1,\n            img_data: 1,\n            img_alt: 1,\n            img_title: 1,\n            categories: 1,\n            published: 1,\n            modified: 1\n          }\n        }),\n        crudInst.getItem({\n          collection: conf.db.collections.elBuenFin,\n          query: { _id: req.params._id },\n          projection: {\n            name: 1,\n            thumbnail: 1,\n            slug: 1,\n            content: 1,\n            title: 1,\n            h1: 1,\n            h2: 1,\n            meta_title: 1,\n            meta_description: 1,\n            url_site: 1,\n            img: 1,\n            img_alt: 1,\n            img_title: 1,\n            img_data: 1\n          }\n        }),\n        crudInst.getPagination({\n          query: { 'stores._id': req.params._id, 'categories._id': elBuenFinCategory },\n          collection: conf.db.collections.main\n        }),\n        crudInst.getItem({\n          collection: conf.db.collections.seo,\n          query: { _id: elBuenFinCategory }\n        })\n      ]\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            items: results[0],\n            info: results[1],\n            pagination: results[2],\n            seo: results[3]\n          })\n        })\n        .catch(function (error) {\n          res.json(error)\n        })\n    })\n\n    return that\n  }\n\n  function getIndex () {\n    let crudInst = spec.crud\n    let conf = spec.config\n    spec.router.get('/el-buen-fin', function (req, res) {\n      let page = req.query.page ? Number(req.query.page) : 0\n      let iterable = [\n        crudInst.aggregate({\n          collection: conf.db.collections.elBuenFin,\n          pipeline: [\n            { $sample: { size: 15 } },\n            { $project: {\n                _id: 1,\n                name: 1,\n                slug: 1,\n                thumbnail: 1,\n                img: 1,\n                img_data: 1,\n                img_alt: 1,\n                img_title: 1,\n                published: 1,\n                modified: 1\n              }\n            }\n          ]\n        }),\n        crudInst.getItems({\n          collection: conf.db.collections.main,\n          query: { 'categories._id': elBuenFinCategory },\n          items_per_page: conf.db.itemsPerPage,\n          skip: conf.db.itemsPerPage * page,\n          sort: { published: -1 },\n          projection: {\n            name: 1,\n            thumbnail: 1,\n            elBuenFin: 1,\n            slug: 1,\n            meta_description: 1,\n            img: 1,\n            img_data: 1,\n            img_alt: 1,\n            img_title: 1,\n            categories: 1,\n            stores: 1,\n            published: 1,\n            modified: 1\n          }\n        }),\n        crudInst.getPagination({\n          query: { 'stores._id': req.params._id, 'categories._id': elBuenFinCategory },\n          collection: conf.db.collections.main\n        }),\n      ]\n\n      Promise.all(iterable)\n      .then(function (results) {\n        res.json({\n          stores: results[0],\n          offers: results[1],\n          pagination: results[2]\n        })\n      })\n      .catch(function (error) {\n        console.log(error)\n        res.json(error)\n      })\n      \n    })\n\n    return that;\n  }\n\n  function getStores () {\n    let crudInst = spec.crud\n    let conf = spec.config\n\n    spec.router.get('/el-buen-fin/stores', function (req, res) {\n      let iterable = [\n        crudInst.aggregate(\n          {\n            collection: conf.db.collections.elBuenFin,\n            pipeline: [\n              { $limit: 100 }, // Primiero limitar la cantidad\n              // Ordenarlo por nombre para obtener el arreglo en el sig, pipe ordenado alfabeticamente en orden ascendente\n              { $sort: { name: 1 } },\n              { $project: {\n                // A mayusculas, porque 'e' !== 'E'\n                _id: 1,\n                name: 1,\n                slug: 1,\n                thumbnail: 1,\n                img: 1,\n                img_data: 1,\n                img_alt: 1,\n                img_title: 1,\n                published: 1,\n                modified: 1\n              }\n              },\n              {\n                $group: {\n                  _id: {\n                    $switch: spec.commonDbParams.groupAlphabeticallyInSwitch\n                  },\n                  stores: { $push: '$$CURRENT' }\n                }\n              },\n              { $sort: { _id: 1 } }\n            ], // pipeline\n            options: {\n              collation: {\n                locale: conf.db.collation.locale,\n                alternate: 'shifted'\n              }\n            } // options\n          }\n        ) // aggregate\n      ] // iterable\n\n      Promise.all(iterable)\n        .then(function (results) {\n          res.json({\n            items: results[0]\n          })\n        })\n        .catch(function (error) {\n          console.log(new Error(error))\n          res.json(error)\n        })\n    })\n\n    return that\n  }\n\n  function getFormData () {\n    let conf = spec.config\n    let crudInst = spec.crud\n    let router = spec.router\n    // get an specific promotion data, query by slug property\n    router.get('/formdata/el-buen-fin/:id', function (req, res) {\n      let iterable = [\n        crudInst.getItem({\n          collection: conf.db.collections.elBuenFin,\n          query: { _id: req.params.id },\n          items_per_page: 1\n        })\n      ]\n\n      Promise.all(iterable)\n        .then(function (results) {\n          console.log(results);\n          res.json({\n            item: results[0]\n          })\n        })\n        .catch(function (error) {\n          res.json(error)\n        })\n    }) // router.get\n\n    return that\n  }\n\n  /**\n   * Creates or update a store\n   * @param  {[type]} params Until now it contains the path of the request\n   * @return {Object}        For cascade purpose\n   */\n  function save (params) {\n    let conf = spec.config\n    let crudInst = spec.crud\n    let saveMethod = 'setItem'\n\n    spec.router.post(params.path, function (req, res) {\n      let rightNow = new Date()\n      let saveParams = {\n        collection: conf.db.collections.elBuenFin\n      }\n      let data = Object.assign(req.body, { modified: rightNow })\n\n      // Al crear nueva, la fecha de publicacion y modificacion son la misma\n      if (!data.hasOwnProperty('published')) {\n        data.published = rightNow\n      } else {\n        // asegurandonos que se guarde como un campo tipo fecha\n        data.published = new Date(data.published)\n      }\n\n      if (data.hasOwnProperty('_id')) {\n        saveMethod = 'update'\n        delete data._id\n        delete saveParams.document\n        saveParams.query = { _id: req.params.id }\n        saveParams.update = { $set: data }\n        saveParams.options = { upsert: true }\n      } else {\n        data._id = data.slug\n        saveParams.document = data\n      }\n\n      crudInst[saveMethod](saveParams)\n        .then(function (dbResponse) {\n        //  return response to client with res object\n          res.json(dbResponse)\n          return dbResponse\n        })\n        .catch(function (err) {\n          console.log('Ocurrió un error al tratar de Guardar una Tienda:')\n          console.log(err)\n          res.json(err)\n        })\n        .then(function (dbResponse) {\n          if (dbResponse.result && dbResponse.result.ok) {\n            return true\n          } else {\n            return Error(dbResponse)\n          }\n        })\n        .then(function (result) {\n          if (result === true) {\n            Promise.all([spec.csm.elBuenFin(), spec.csm.pages()])\n              .then(function (results) {\n                if (results && results.length > 0) {\n                  return spec.csm.index()\n                }\n              })\n              .catch(function (err) {\n                console.log(err)\n                return err\n              })\n          } else {\n            console.log(result)\n          }\n        })\n        .catch(function (err) {\n          console.log(err)\n        })\n    }) // router.post\n\n    return that\n  }\n\n  function existsBySlug () {\n    let crud = spec.crud\n    let config = spec.config\n    spec.router.get('/el-buen-fin/exists/:slug', function (req, res) {\n      crud.getItem({\n        collection: config.db.collections.elBuenFin,\n        query: { slug: req.params.slug },\n        items_per_page: 1,\n        projection: { _id: 1}\n      })\n      .then(function (offer) {\n        console.log(offer)\n        if(offer && offer._id) {\n          res.json({\n            success: true\n          })\n\n          return\n        }\n\n        res.json({\n          success: false\n        })\n      })\n      .catch(function (error) {\n        console.log(error)\n        res.json(error)\n      })\n\n    })\n\n    return that;\n  }\n\n  that.save = save\n  that.getById = getById\n  that.getIndex = getIndex\n  that.getStores = getStores\n  that.getFormData = getFormData\n  that.existsBySlug = existsBySlug\n\n  return that\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/handlers/elBuenFin.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 41\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 42\n// module chunks = 0","module.exports = require(\"rotating-file-stream\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rotating-file-stream\"\n// module id = 43\n// module chunks = 0","var cron = require('node-cron')\r\nvar csm = require('./create-sitemap.js')\r\nvar utils = require('../index.js')\r\n\r\nvar schedule = {\r\n  ping: ping\r\n}\r\n\r\nfunction ping () {\r\n  // cron.schedule('*/1 * * * *', function (){\r\n  cron.schedule('1 12 * * *', function () { // run every day at 12:00 hrs\r\n    utils\r\n      .checkIfNewOffers()\r\n      .then(function (res) {\r\n        console.log('sitemaps')\r\n        if (res && res.news) {\r\n          csm.ping()\r\n        }\r\n        console.log(res)\r\n      }).catch(function (err) {\r\n        console.log(err)\r\n      })\r\n  })\r\n\r\n  // cron.schedule('*/1 * * * *', function (){\r\n  cron.schedule('50 23 * * *', function () { // run every day at 23:50 hours\r\n    utils\r\n      .checkIfNewOffers()\r\n      .then(function (res) {\r\n        console.log('sitemaps')\r\n        if (res && res.news) {\r\n          console.log(res)\r\n          csm.ping()\r\n        }\r\n      }).catch(function (err) {\r\n        console.log(err)\r\n      })\r\n  })\r\n}\r\n\r\nmodule.exports = schedule\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/sitemaps/schedule.js","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 45\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 46\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 47\n// module chunks = 0","module.exports = require(\"connect-flash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-flash\"\n// module id = 48\n// module chunks = 0","import  { Strategy as LocalStrategy } from 'passport-local'\nimport bcrypt from 'bcrypt'\n\nlet admin = {\n\tid: 'JGO2017*',\n\tpwd: bcrypt.hashSync('Cdo_2017*', bcrypt.genSaltSync(), null),\n\tuserName: 'ofertadeo@gmail.com'\n}\n\n\nexport default function(passport) {\n\t// =========================================================================\n    // passport session setup ==================================================\n    // =========================================================================\n    // required for persistent login sessions\n    // passport needs ability to serialize and unserialize users out of session\n\n    // used to serialize the user for the session\n    passport.serializeUser(function(user, done) {\n      done(null, user.id);\n    });\n\n    // used to deserialize the user\n    passport.deserializeUser(function(id, done) {\n      done(null, admin);\n    });\n\n    // =========================================================================\n    // LOCAL LOGIN =============================================================\n    // =========================================================================\n    // we are using named strategies since we have one for login and one for signup\n    // by default, if there was no name, it would just be called 'local'\n\n    passport.use('local-login', new LocalStrategy({\n        // by default, local strategy uses username and password, we will override with email\n        usernameField : 'email',\n        passwordField : 'password',\n        passReqToCallback : true // allows us to pass back the entire request to the callback\n\t    },\n\t    function(req, email, password, done) { // callback with email and password from our form\n\n\t\t\t\t// if no user is found, return the message\n\t      if (admin.userName !== email) {\n\t      \treturn done(null, false, req.flash('loginMessage', 'Usuario no existe.')); // req.flash is the way to set flashdata using connect-flash\n\t      }\n\n\t      // if the user is found but the password is wrong\n\t      if (!bcrypt.compareSync(password, admin.pwd)) {\n\t      \treturn done(null, false, req.flash('loginMessage', 'Contraseña incorrecta')); // create the loginMessage and save it to session as flashdata\n\t      }\n\t      \n\n\t      // all is well, return successful user\n\t      return done(null, admin);\n    }));\n\n};\n\n\n// WEBPACK FOOTER //\n// ./server/utils/passport/index.js","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 50\n// module chunks = 0","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 51\n// module chunks = 0","export default function (app, passport) {\n\n\tlet loginPath = '/ofer-admin/login'\n\tlet adminPath = '/ofer-admin'\n\tlet logoutPath = '/ofer-admin/logout'\n\t\t// process the login form\n\tapp.post(loginPath + '/?', passport.authenticate('local-login', {\n\t\tsuccessRedirect : adminPath, // redirect to the secure profile section\n\t\tfailureRedirect : loginPath, // redirect back to the signup page if there is an error\n\t\tfailureFlash : true // allow flash messages\n\t}));\n\n\t// =====================================\n\t// ofer-admin SECTION =========================\n\t// =====================================\n\t// we will want this protected so you have to be logged in to visit\n\t// we will use route middleware to verify this (the isLoggedIn function)\n\tapp.get(adminPath + '*', isLoggedIn);\n\n\t// =====================================\n\t// LOGOUT ==============================\n\t// =====================================\n\tapp.get(logoutPath +'/?', function(req, res) {\n\t\treq.logout();\n\t\tres.redirect(loginPath);\n\t})\n\n\n\t// route middleware to make sure\n\tfunction isLoggedIn(req, res, next) {\n\n\t\t// if user is authenticated in the session, carry on\n\t\tif (req.isAuthenticated() || /^\\/ofer-admin\\/login\\/{0,1}$/i.test(req.path)) {\n\t\t\treturn next();\n\t\t}\n\n\t\t// if they aren't redirect them to the home page\n\t\tres.redirect(loginPath);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","module.exports = {\n  loading: {\n    color: '#ff80ab',\n    height: '11px'\n  },\n  cache: true,\n  /*\n  ** Headers of the page\n  */\n  head: {\n    htmlAttrs: {\n      lang: 'es-MX'\n    },\n    title: 'Ofertas, promociones y descuentos en México | Ofertadeo',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { name: 'theme-color', content: '#1976d2' },\n      { name: 'msapplication-TileColor', content: '#2d89ef' },\n      { name: 'msapplication-TileImage', content: '/favicons/mstile-144x144.png' },\n      { name: 'msapplication-config', content: '/favicons/browserconfig.xml' },\n      { name: 'p:domain_verify', content: 'd22a77a044a4490ebd5019e778f4a37b' },\n      { name: 'google-site-verification', content: '-jN3QPeaXQTbgPBlyAXlXXh7qRSesWIpa3GC3ijTjJM' },\n      { name: 'msvalidate.01', content: '162D9E28E432D290B43E41702E108642' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicons/favicon.ico' },\n      { rel: 'apple-touch-icon', sizes: '180x180', href: '/favicons/apple-touch-icon.png' },\n      { rel: 'icon', type: 'image/png', sizes: '32x32', href: '/favicons/favicon-32x32.png' },\n      { rel: 'icon', type: 'image/png', sizes: '16x16', href: '/favicons/favicon-16x16.png' },\n      { rel: 'manifest', href: '/favicons/manifest.json' },\n      { rel: 'mask-icon', href: '/favicons/safari-pinned-tab.svg', color: '#1976d2' },\n      { rel: 'shortcut icon', href: '/favicons/favicon.ico' },\n      { rel: 'dns-prefetch', href: '//www.google-analytics.com' }\n    ],\n    __dangerouslyDisableSanitizers: ['script']\n  },\n  /*\n  ** Global CSS\n  */\n  css: [\n    '@assets/stylus/roboto-material-icons.styl',\n    '@assets/stylus/main.styl',\n    '@assets/css/main.scss'\n  ],\n  /*\n  ** Add axios globally\n  */\n  build: {\n    vendor: ['axios', '~/plugins/striptags.js'],\n    /*\n    ** Run ESLINT on save\n    */\n    extend (config, ctx) {\n      if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}